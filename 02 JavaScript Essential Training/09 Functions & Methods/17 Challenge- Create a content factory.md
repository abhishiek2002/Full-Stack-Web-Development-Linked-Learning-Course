Challenge intro: Create a content factory
(upbeat music) - [Instructor] When you build websites and applications, you'll often use JavaScript to pull data from a source in the form of structured objects and then use the data within those objects to populate HTML to be displayed in the browser. This challenge lets you experiment with this scenario by creating a content factory function. In the answer code for the challenge here, you have a lot of stuff going on, so let's break it down from the top. First, we have a backpack constructor class that creates our backpack, and it also sets up this backpack age function that allows us to find out how old the backpack is. Then two backpacks are defined, one called everydayPack and one called frogPack, and down here, we have a constant with a backpack object array that contains the everydayPack object and the frogPack object. All of this creates the type of array structure that you normally encounter when you work with several pieces of content. You normally have an array of objects, and you can iterate through that array of objects to display each object in turn. Now we get to the main function. It's down here, create BackpackMarkup. This function will act on the document object to add new content in, and right now it's not complete. If you look at it, all it's doing is returning the everydayPack content to the document, which isn't really doing anything for us. In this challenge, I want you to first iterate through each of the items in the backpackObjectArray, and then for each of the items, create a new article element with an ID matching the ID field in the backpack object. Then use the backpackAge function within the constructor to calculate the backpack age and add it in place of the purchase date. So right now, you'll see it says age here, and then it just has date acquired, so you need to fix this by pulling in the function instead. And then finally, populate and return the content constant with an HTML structure matching the example below. The example below is the full output. So as you can see, what we have right now is almost what you need, but you need to match up this structure here with your new created items and make it so for each of these items in the array. As you work on this challenge, you'll make changes to everything inside the createBackupMarkup function, except for this line here. Make sure that you leave return content at the end, 'cause that's what we're returning to the testing code.


Solution: Create a content factory
(upbeat music) - [Instructor] There are several ways you can solve this challenge. I'll walk you through the one I think is the most straightforward. It all happens inside the create backpack markup function. This will be our content factory. What we need to do is grab the backpack object array and then iterate through each of the items and generate HTML for the data within each of the items and then somehow return that. And if we look inside create backpack markup right now, you'll notice we're sort of partway there already. We have a constant called content that can contains HTML for our backpack objects, but currently it's just calling one of the backpacks. Then content is returned to our testing function. So I need to change the contents within content to contain all the information for both of the backpacks. And I can do that using the map method. So at the very top here, I'll start out by creating a couple of new lines. And then I'll rename this function to HTML for now, just for reference. I'll change it later. Then I'll set up a new constant called content, and this will be the constant that we return inside content. I'll now grab backpack object array and I'll use the map method on the array. You'll remember the map method allows us to grab each item of an array, perform a callback function on that item, and then return the result of that function into the container. So that way we can grab an item, generate HTML for that item, and then return the HTML into the array inside the content array. For map to work, I need to set up my callback function. So I'll grab backpack and I'll set up arrow function here. And then everything's going to happen inside this arrow function. So I'm going to cut out this code here and place it inside my arrow function and then just indent everything so it's nice and pretty. And then at the very top here, I'll say, okay, now we have a backpack. I first need to create an article with the ID matching the field, the ID field, and the backpack object. So I'll set up a let called backpack article and I'll set it equal to document, create element article. Then I'll grab backpack article. I'll set the attribute ID to backpack ID. So now we're going into the backpack item, grabbing the first item there because that is the ID and displaying it as the ID for the article elements. All right, now that I have an article element, I need to populate it with content, and that's where this stuff comes in. So instead of saying const HTML equals, I'm going to cheat and instead say backpack article.inner HTML equals and just set it to this information here. Now this isn't quite ready yet, but I'm going to leave it the way it is for now and just return backpack article. That's to ensure the map method returns this HTML into the content array so that we can return the content array to the testing method. Alright, let's test the code right now just to make sure things are working so far. Over here in the console output, I see map issues, create element issues, set attributes used, but the output does not match the test case. And if I scroll down, I can see why. Immediately notice how the information is the same. Everyday backpack. Everyday backpack. Hmm. But we're iterating through the items, right? The error is obvious. We need to refer to backpack, but in the original code we're referring to everyday pack. So I need to change all these references here to everyday from everyday pack to backpack and run. Test my code again. So this time I can see there are two different pieces of information here, but test still fails. Now looking at the output, I can see why. 'Cause it says here, age December 5th, 2018, 1500 hours, days old. Yeah, so that's not correct. And if we look at the instructions, it says use the backpack age function to calculate the backpack age. All right, now let's scroll up and see inside the backpack object constructor, there's a method called backpack age. And because the method belongs to the object itself, we can use the method directly. So down here, instead of saying age and then backpack date acquired, which just outputs the date acquired, we can call that method. So we'll call backpack age. Click test my code again. All test now pass. And here we have the days old message. How does that work? Well, if we scroll back up again, you can see in the backpack age method, we set up the new date, then grab the date acquired, and then do the math to find out how many days there have been between the date acquired and today's date, and then return days since acquired. That's it. That's the solution to this challenge.