Challenge intro: Create an event listener
(upbeat music) - [Instructor] When a JavaScript application has interactive elements like buttons, or scroll events, or similar features, they're typically triggered using event listeners. In this challenge, you'll add event listeners to a list of form elements to allow the user to update fields in the document. Now the testing platform we're using doesn't have support to display the visible browser. So instead, I've created this sketch to show you what the DOM creates and this is the DOM you'll be working against. So on the webpage there are four pieces of information, name, description, color, and volume. And for each of these items there is the text itself and then there's an input field to update information and an update button. Your challenge is to set up the code so that if someone fills in any one of these fields and clicks on the update button for that field, the text updates as well, but only for that field. Because you can't see the output HTML, I've added it into the instructions here so you can scroll down and see how everything is structured. This will be good as reference as you're working. You'll also notice down here in the test code that I've already set up inputs for name inputs, description input, color input, and volume input. The script behind the scenes will populate each of your fields with this information here and try to click on any submit button it can find. So your challenge is to build the functionality to capture that click and make sure the information goes to the right place. Your task is to add an event listener to each of the four forms in the dom. That event listener should listen for a submit event on the form the click button belongs to. When the button is clicked, the event listener should update the contents inside the span value for the relevant item. To solve this challenge, you need to figure out how to add an event listener to each of these form elements and how to associate the click on a specific update button with the correct form and the correct information item. I'll give you one hint to get started here. Use the forEach loop to iterate through the form items in the DOM. That's all you need to know for this last challenge. Good luck.


Solution: Create an event listener
(upbeat instrumental music) - [Instructor] There are several ways of solving this challenge, and if you couldn't make it work with any of the ways you tried that is perfectly okay because this particular challenge is much more advanced and much more complex than the previous ones. I'll show you why before I show you the solution. We're working with a series of forms here, and when the user interacts with any of these forms we need to not only detect which button was clicked but which input field is associated with that button and which external paragraph with a span inside it is associated with that button so that the value that's put in the input field gets passed up into the span with the class value for the associated paragraph. That is not straightforward. The reason I've created this challenge is because this is a fairly common problem you'll encounter on the web, and understanding the logic of how to solve this kind of problem will help you as you move forward into your future with JavaScript. So, let's work on the solution together. The very first thing I need to do is identify all of the form elements in the DOM, and I can do that inside the update page because I have the document model available to me. So, I'll start off by setting up a new constant called updateForms, and I'll use document.querySelectorAll and target form to get all of the forms. So, now I have a list of every form element. Then I can grab that list and use the forEach method on that list so that I can iterate through each of the form items in turn. Here I grab updateForm, which is the individual form, and I'll set up a callback function. Now, why did I use forEach instead of map here? It's because I'm acting directly on the DOM so I don't need to return anything. ForEach acts directly on the elements we give it, whereas map changes the content and then returns it into a new array, which is not what we need here. All right, inside this forEach loop I now need to append an event listener to each of the forms. So, I'll say updateForm, that's the individual form, addEventListener, and I'm listening for submit. When we detect submit I capture the event so we can identify which button was pressed, and then set up a callback function. And inside this callback function we'll do all of our work. Now, the very first thing we need to do is prevent the default action from happening. That's because the submit event is typically submitting a form and the logical thing for the browser to do at that point is to reload the page, but we don't want that to happen. So, we're going to grab the event and then say preventDefault. So, this just stops the browser from reloading the page and ruining everything. Now we can identify which elements we need to work with. Looking back at the HTML you'll notice the button has this data-target attribute with the value name in it. Looking at the input field it has an ID name-input, and up at the paragraph it has an ID just name. This is important. This is what we're going to use to associate the button with the correct field and the correct paragraph with a span inside it. So, I'll start by grabbing the data-target value for the currently pressed button. So, I'll set up a new constant called target. I'll set it equal to event, so that is the current event that we capture, target, that is the button that was pressed, so the element itself, and then getAttribute data-target. So, now the target constant will hold the value of the data-target attribute for whatever button was pressed. Then we can use this value to identify these other fields. So, I'll go down and say const inputElement. So, here we want to find the input with the ID name-input, or target-input. So, I'll set that equal to document, getElementById, and here I'm going to use a template literal and say dollar curly braces target-input. And then we also need this span here that sits inside a paragraph with a ID that matches the data target, so name and name. So, I'll say const targetElement equals document getElementById, and here we just want target. And then inside that element, which is the paragraph, we want the span with a class value. So, I'll say querySelector.value. Okay, so now we know what button was pressed, which input element we want to grab information from, and where we want to place that information. Then all that's left to do is grab targetElement, that's the span up here. Then set its textContent, that is the text inside the element, equal to inputElement, that is the input element associated with the button, and .value, that is the text that has gone inside the input element. Now, this text has been filled out down here in my test code, and if I don't have any spelling errors in this code right now and click Test My Code we should get all tests passed and the final output. And here you can see it says for p class, name, Adventure, which matches Adventure Backpack down here, and then the Update Name form, and then we have description. And the description is a durable backpack for outdoor adventures, blah, blah, blah. So, this works and not only that, but you can go in and change these values if you want to. So, the values for each of these fields, and you'll see them update in the output but the test will still pass because we now have event listeners on buttons that are clicked through scripts to populate this form. That's it, that's the solution.