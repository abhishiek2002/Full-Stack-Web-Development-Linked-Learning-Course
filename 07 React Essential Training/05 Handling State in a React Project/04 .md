Handling state with nested components
- [Narrator] Right now we have our app component. This is managing state, and there are some child components that this is rendering as well. So we have header and we have main. A best practice that is often talked about in React is how we want as much as possible to lift state up in our application. And what that means is we want it to be as high up in the tree as possible. As much as possible we want to minimize the number of times we're calling useState in these smaller components because then it can make it harder to track these changes and things get out of sync pretty quickly. So a recommendation that I have for you is to create your state within, say, the app component or whatever the root component is in your application. And then you can pass these values down as properties to child components. So what we want to do here is quickly show a demo of this. So here in our app we have the status. Now we can pass this status down to a child component using a variable name. So let's go ahead and call this openStatus and we'll set that equal to status. So whatever this value is is going to be passed down to the child, which is the main component. So once I've done that, I can reference that on this main component. And we could say, here, we'll call this openStatus. So here, let's just try to display openStatus, see what we get. Here in the app it says, Welcome to this beautiful restaurant! I suppose that's not doing that much for us. So we'll say "Open" : "Closed". So if this is true, return open. If it's not, return closed. So here we're seeing open. Then when I close the restaurant, this is going to update to reflect that state change. So we don't use useState for this. Instead we're just passing that down via props. So we're saying openStatus is the prop, but it refers to that state variable. Now another thing that I want to show you is how we might pass this state back up to the parent component. So let's go back to our main component. We're going to say onStatus, and then here we're going to lock that into setStatus. Now if we go to our main component and we say onStatus, and then we add an onClick to this button here, we can call this function. So we'll say onClick equals onStatus, and then we need to pass in here whatever we want that value to be. So let's just say true. So now if we go back to our app that's running, the initial state is open. If I close the restaurant, it's closed. But if I click, and this is from the child component, this is from the main component. This is going to call that function and it's going to, from this event, change the state of the entire app. So this is how the relationship between these two components will work. We create a state variable at the highest level we can. This is going to keep track of whatever the status is, and then I pass that down as properties. So we say openStatus and onStatus, and then these functions are then called inside of the main component. And then it's going to actually change the status of the entire app simply by calling them from props.