Creating a client component
- [Instructor] Currently, we are rendering a few different components that are loading dynamic data from that REST API. So within this component, we fetch some data, we populate it into the page, and then that passes data down to each one of these HotelBlocks. Now something that is an important thing to know about working with Next.js is the concept of client components. We know that we fetch data most often in a server component, and that all of our components are by default server components when we're working in a Next application. But sometimes when we have interactivity when we're working with browser APIs or we're trying to reach out to some local files, we might need to use client rendering in order for these sites to work. Let me show you an example. Here in our HotelBlock, what would happen if we wanted to use an image? We have here inside of the public folder a few different images for these different hotels. Each one of these has an id.jpeg, so we can parse that from the data. So we want to create these image URLs so that we can load them from the public folder. So a couple changes that I need to make here. We're going to first add an id here to our name, and then we're going to import Image from "next/image"; Then inside of the HotelBlock, we're going to add this image component. We'll specify the source here, so id, and then we'll add a pixel width and a pixel height. Okay, so from here, what we can do is we're going to create a loader function that's going to create the URL for wherever these images live based on their ID. So we can create here on line 11 an imageLoader. That's going to take a look at whatever the source is, the source value, and then we'll return './hotels/${src}.jpeg' J-P-E-G. So this is going to create that URL for us. What we can do with the image component with Next.js is we can say, hey, I actually want to use a loader called imageLoader to load that file. Then what I can do is I can scroll down a little bit and make sure that my page component has an id. Great. So now this can be consumed in the HotelBlock. Let's see how we're doing. So over here it says, functions cannot be passed to client components, blah, blah, blah, and what this error actually means is that we need to make an adjustment so that our HotelBlock is a client component. Our HotelBlock is trying to look in this folder, but because it's being server rendered, it doesn't know how to do that. So we need to create inside of hotels a new file. We're going to call it HotelBlock.js, and we're going to take any of the code that makes this work and add it to this file. We also need to grab the image from next/image. We want to export default this function so that the HotelBlock can be consumed over here inside of this page. So we'll say import HotelBlock from "./HotelBlock"; Okay, so we can also delete that image because we're not using it there. We're using it in the different file. Okay, so we're still getting this error, and that's because I need to take one final step. I alluded to this before. At the very top of this file, we're going to say "use client"; use client will always use if we're adding interactivity, button clicks, if we are trying to look in this public directory, if we are trying to work with any browser APIs like local storage or geolocation, things like that. So if I go back now, we should see all of these images are loading. So this is our first example of creating a client component in Next.js. We know it's a client component because we're trying to deal with some local files, and we say that it's a client component with use client.