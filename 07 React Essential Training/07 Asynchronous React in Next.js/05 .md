Creating a server action
- [Instructor] We've created a little container for our form so we have an email and a message. Now we need to handle these form elements when they are submitted. So I want to show you how you can work with server actions. Server actions are functions that can be executed on the server. These can be called from server components or client components to do things like handling form submissions and other types of data mutations. So we're going to put all of this directly into the same file so that we can see how everything works together. The first thing I'll do is here in contact page.js, we're going to create an asynchronous function called submitForm. You can call this function whatever you want to call it, something descriptive. Obviously the more descriptive the better. Then we're going to use formData. So whenever I'm dealing with form elements, our browser is going to process those form elements so we can just work with those elements natively instead of having to create different state variables for each one of these fields or for the entire form. So we're going to use a directive called useServer here. UseServer is going to mark that this is a server side function that can be called from client side code. So this is some client side code here. We're calling this function. Then we're going to adjust this. So we need to process these form fields. So let's create a variable called formFields, and we'll set the email to be formData.get ("email") and then we'll say message: formdata.get ("message"), so processing both of our form elements here. Then we're going to console log this. So we'll add a couple console logs, so we'll say formFields. So here, then we'll say console.log TODO: Send these form field values to a backend. So depending on which backend you're using, the rules will be slightly different, but this is the moment that you would do that. And then we'll just return these form fields on line 12. The way that we're going to wire up this function to our form is to scroll down to where we start our form. We're going to add an action to the form, so when it's submitted, we want to call this function. So we need to grab submitForm, pass it in here, and we'll click save. Alright, so couple things here. I'll plug in my email address and I'll say, have we successfully built a server action? And then we're going to click send. So sometimes when we're dealing with Next.js code, a quick hint here, we will look in the browser console for our contact us message, and we don't see it. So the place we actually want to look for this, because this is a server action. This terminal is going to show us, because our application is running here, it's not a client message, it's a server message. So this is telling me that my form fields are returned, and now I can go through the process of building our form field values into our backend. So regardless of where you want to send this, if it's an API, if it's some sort of database that you want to send it to, all of that would be handled right here. Alright, so we've done it. We've created a server action here. It's called submitForm, and we've wired it up to the form element by adding it as an attribute. So whatever types of mutations or form submissions that you want to create, if you're working with Next.js in React, it's a good idea to take advantage of these server actions.