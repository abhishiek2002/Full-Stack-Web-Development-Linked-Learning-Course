POST
- Given the necessary authorization, a REST API can be used to create new resources. And in the case of WordPress, that means we can use the REST API to create new posts. This is typically done by sending a POST request to a resource collection, like the posts collection inside of WordPress. To create a new post via the REST API, I want to send a POST request to this posts resource up here, so the first thing I'll do is set up a POST request. Then I need to add an authorization header to show I actually have the ability to use the POST method. I'm sending data along with my POST request, so that means I need to find what type of data this is. I do that with a Content-Type header, and here I want to set up application and JSON because this will be JSON data. And then finally, I need to encode the actual data for the post in JSON so that gets sent along. It looks like this. For WordPress, I only really need three things: I need a title, some content, and finally, a status. Now technically I don't need the status, but if I don't set a status the post will automatically be filed in draft. If I want this post to be public right away, I need to set the status to publish. And then if I want to I can also add the author ID. This is so we know who created the post. If you don't add an author ID then the post will automatically get attributed to the main owner of the site. So I'll say author, and here I'm just going to give it ID one because that's the only author registered on the site. Now just to show you I'm not cheating, this is the WordPress site we're working with. As you can see, currently there are three posts available. I can reload this page to show you again. The Case for WordPress Telemetry, Hello world! And something else. Now I'll send this request. Over on the right-hand side here we get a 201 created status, meaning a new post was created. Go back to the WordPress site and reload it. Here you see that new post has been created. A post created via the REST API. And if I go down into the data here, you'll see the entire dataset for this post is now available to us, and this is important. Anytime you send a POST request to a REST API, it'll return the entire resource back to you once it's created. That way, the client can then use that resource immediately for error checking to make sure everything worked properly, and also just to populate the client itself, so the user of the client can see that post once it's created. Now remember that Hypermedia as the Engine of Application State constraint I keep bringing up? Well, now we can take full advantage of it. This return data from our post contains all the information about the post. So if I scroll up and down I'll eventually find the entry that provides the resource link to this post. However, because I just created a new resource using a POST request, the header of the response also contains the direct link to that resource. So right here we have a location header that provides a link to the resource, here you can see restful dev wp json wp v2 post and 15. Now I can go directly to that post by following the location header, and I'll paste it up here. Then change my request to a GET request, and I'll just comment out the stuff down here for now. Send a GET request, and here on the right-hand side we no have the singleton resource for this post just created through the REST API.