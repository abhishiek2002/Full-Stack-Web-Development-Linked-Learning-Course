# Exploring PUT and PATCH Requests

While `GET` requests retrieve data and POST requests create new resources, `PUT` and PATCH requests are used to update existing resources in the REST API. The names of these methods are literal:

`PUT` requests put a new resource on top of an existing one, replacing the entire resource with the data you provide. If you don't include a field in your `PUT` request, it will be set to null or its default value.

PATCH requests patch the submitted fields in the resource while leaving the rest of it intact. Any fields not included in the request remain unchanged.

## Replacing all info about a user with PUT

Let's start by updating a complete user record using PUT. This requires all the fields that were originally used to create the user. In this example, we’re updating the name and email address for the user while leaving the rest of the information intact.

1. In the requests.http file, add a new line below your previous requests, add ### to indicate a new request, and a new empty line below that.
2. Add the following request where 987654 is the ID of the user record you want to update:

```
PUT {{baseURL}}/users/987654
Content-Type: application/json

{
  "name": "Nathaniel Cayden",
  "email": "nathaniel@example.com",
  "address": "5432 Street",
  "phoneNumber": "5555555555"
}
```

1. Select "Send Request".
2. In the Response panel you'll see: `{ "message": "User 987654 updated successfully" }`.

Two things to note here:

First, you must provide all the required fields (`name`, `email`, `address`, `phoneNumber`), even if you only want to change one of them. This is the nature of PUT requests—they replace the entire resource.

Second, when you do a `GET` request for the user, you’ll notice there are additional fields not addressed in the `PUT` request: `memberSince`, `checkedOutBooks`, and `fineBalance`. These fields are dynamically generated by the database and are not part of the user POST or `PUT` schema.

## Updating a user with PATCH

`PUT` works well when you need to do a wholesale replacement of a resource or you have all the new information handy and want to ensure it is all up to date. However, the brute-force of `PUT` can easily lead to accidental overwrites of information, so when you are looking to update specific fields, `PATCH` is often a better option. In this example, the `address` and `phoneNumber` fields are updated without touching the other fields.

```
PATCH {{baseURL}}/users/987654
Content-Type: application/json

{
  "phoneNumber": "5559876543",
  "address": "42 Other Avenue"
}
```

Note that the order of the fields does not matter here, only the names.

## PUT and PATCH endpoints in the REST API

The REST API supports PUT and PATCH operations for both users and books. You can see all available endpoints in the FastAPI UI. For reference, they are:

**`PUT /users/{user_id}` – Complete user update**

Request body (all fields required):

```
{
  "name": "string",
  "email": "string",
  "address": "string",
  "phoneNumber": "string"
}
```

**`PATCH /users/{user_id}` – Partial user update**

Request body (any combination of fields):

```
{
  "name": "string",
  "email": "string",
  "address": "string",
  "phoneNumber": "string"
}
```

**`PUT /books/{isbn}` – Complete book update**

Request body (all fields required):

```
{
  "isbn": int,
  "title": "string",
  "author": "string",
  "publisher": "string",
  "year": int,
  "pages": int,
  "genre": "string",
  "location": "string"
}
```
**`PATCH /books/{isbn}` – Partial book update**

Request body (any combination of fields):

```
{
  "isbn": int,
  "title": "string",
  "author": "string",
  "publisher": "string",
  "year": int,
  "pages": int,
  "genre": "string",
  "location": "string"
}
```

## When to use PUT vs. PATCH

Use PUT when:

- You have all the data for the resource
- You want to ensure the resource exactly matches your request
- You're implementing "save" functionality where the entire form is submitted

Use PATCH when:

- You only want to update specific fields
- You're implementing features like "edit profile" where users can change individual pieces of information
- You want to minimize bandwidth by only sending changed data

Both methods will validate that the resource exists and return a 404 error if the user ID or book ISBN is not found in the system.