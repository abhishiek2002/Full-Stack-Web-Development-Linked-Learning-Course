DELETE
- [Instructor] At this point you've seen how to discover all the functionality of a REST API using options, how to get resource collections and singleton resources using get, how to create resources using post, and how to modify resources using put and patch. And that brings us to the inevitable conclusion: How to remove resources? If I want to remove a resource, I cans send a delete request to it. This delete request must be sent to the singleton resource URI to be successful, and here again, I need the proper authorization header, otherwise I won't be able to delete anything. The request itself is really simple, just delete, then the URI to the resource, singleton resource in this case, and an authorization header. Now, before I run this request, consider this: I'm sending a delete request to a REST API telling to delete the resource. What do you think happens? Let me show you. Over here, on the live WordPress site, you can see this is the post I want to delete. It's currently sitting under published. Now when I pass this delete request, over on the right hand side we get a 200 OK, telling as that the request was successful, but when I scroll down, we find the entire post. And if I look closely you'll see, the post wasn't actually deleted. Instead, its status was changed from published to trash. And this corresponds with how WordPress itself works. If you click on trash for a WordPress post, it doesn't actually get deleted from the database. Instead, it gets moved to the trash bin. So if I reload this view you'll see the post is gone from the published list, and it's appeared under the trash list. Same post, just sitting in a different location. And in reality, all that's changed internally in the database is this status change down here. This is something you'll often see with the REST APIs. The REST API tries to mimic the behavior of the application you gain access to. So if WordPress puts deleted post in trash, then the REST API will also put deleted post in trash. Which brings up the obvious question: What if you want to actually delete this entry completely. Get it out of the database, who no longer exist. And to do that, we need to ask the REST API, hey, how do I delete a post? So, I'll close down the window, and then I'll send in options requests to the singleton resource. Now we can take a look at what methods are available for us in the singleton resource, and here you see, we have get, post, put, patch, and delete. Now, I've already seen that delete out of the box does not what I want it to do, so I'll do a search for delete, and see what it says about this method. Down here we have the delete method, and it says first ID is required, so we actually delete an object and not something else. And then directly below it says there's an argument called force that defaults to false, and if we set it to true, it allows it to control whether to bypass trash, and force deletion, which is exactly what we want. So, knowing what we now know, we're able to delete this entry permanently. So I'll change the request to delete again, and I'll go to the end, and create a URL query that targets force, and sets force to true. Send the request again. We get a 200 OK at the top here, scrolling down you'll see here we have the post objects, that's while we can back it up, in case we want to resurrect it later. And if I go over to the WordPress site now and reload, we'll see under trash there's nothing, and under published there are only three posts. That means we have successfully deleted both the post, and the resource. To prove it, I can now make a get request to the singleton resource at ID 15, and when I send this request I should get 404 not found, and down here it tells me, invalid post ID, meaning the post, and the resource is gone. What you've seen in this chapter is, once you have a firm grasp of what the http verbs do and how to use them, interacting with the REST API is a relatively straight forward process. And if you're ever unsure about what you can and cannot do on a specific resource, just send an options request, and the REST API will tell you. All of this is because the six constrains of REST ensure consistency, self-descriptive requests and responses, and data portability. All right at your fingertips.