DevOps applications of infrastructure as code
- DevOps has put a lot of work into the theory and tooling around service management. There are many approaches to building systems, maintaining and upgrading their configuration, and deploying applications. - The space can be confusing because many of the tools can be used to perform multiple functions in different ways, and sometimes, this is a good idea and sometimes, it's not. Let's start with some definitions of common terms and then examine techniques. - [Speaker In Red Shirt] The overall term for this is configuration management. It's your process for creating and maintaining your systems and software in a desired state. In DevOps, we want to perform all parts of configuration management in an automated manner, driven by code that controls its behavior. There are three parts to DevOps style automated configuration management: provisioning; deployment; and orchestration. - [Speaker In Brown Shirt] Provisioning is the process of making a server and other underlying computing infrastructure ready for operation, including hardware or virtual hardware, operating system, system services, and network connectivity. - [Speaker In Red Shirt] Deployment is the process of automatically installing and upgrading application software on that system. Whether you developed it or not, this all applies to IT deployment of third party products as well. - [Speaker In Brown Shirt] And orchestration is the act of performing coordinated operations across multiple systems to manage them. Automated failover, rolling deployments, and running runbooks across a fleet of servers are all examples of orchestration. - In other words, you provision the hardware, you deploy the applications, and you use orchestration to make the service work, like the lightning you use to bring Frankenstein's monster to life. - And that sure leaves me thunderstruck. Now, most of the job isn't just creating these things in the first place, but controlling the change of system configuration after initial provisioning and maintaining applications. - There are some important terms describing how tools approach configuration management that'll help you understand how they work. Imperative, also known as procedural. This is an approach where commands desired to produce a state are defined and executed. For example, you make a script that says stop this service in the operating system, copy a new version of the Engine X web server binary into this location, and then start the service. That's imperative. - Declarative, also known as functional. This is an approach where you define a desired state and the tool converges the existing system on the model. So for example, this server should be running version 1.24 of the Engine X web server. Usually declarative systems are a more user-friendly wrapper on top of a complex imperative system that handles the details for you. - Idempotent, the ability to execute the procedure repeatedly and end up in the same state each time. You usually want your tool to be idempotent. If you run your tool to upgrade your server to version 1.24 of Engine X, you don't want running at a second time to just break it. Most declarative tools are supposed to be idempotent. With imperative tools, it's on you to make it that way. - Self-service is the ability for an end user to kick off one of these processes without having to go through other people. The step from manual to automated gets you lots of benefits in terms of reproducibility and quality, but the further step to self-service allows an operations team to remove itself from the critical path and create huge increases in velocity and developer satisfaction. - And finally, drift. You may have a tool to put your systems into a known configuration, but in the real world, things change. People make manual changes outside the tool, or scripts don't work entirely the way they were intended to, and soon, the running system isn't a clean depiction of your definition. We call that drift, and many tools try to do drift detection to let you know if things aren't as you intended them to be. - We'll be using these terms as we continue to discuss configuration management. These definitions are also in the course handout in the exercise files for easy reference.