Operational feedback: Observability
- How do we know what state of failure our systems are in so we can take action if we need to? And beyond that, how do we use this information to feed back into development to improve our service using the three ways? Observability is a measure of how well the internal states of a system can be inferred from knowledge of its external outputs. In other words, by looking at the metrics and logs, that we are monitoring on a given service, can we really tell what's going on? There are many ways to instrument your system to work towards it being observable, but let's take a look at the five areas of observability we suggest measuring: synthetic checks, system and application metrics, end-user performance, system and application logs, and finally, security. You can test a running services performance and uptime by programmatically hitting it and checking the results. These are often referred to as synthetic checks or health checks, synthetic, because they're not from real user traffic. It's the simplest form of monitoring to answer the question of, is it working? Health checks are often run on sub-components as well, but a high level service health check is usually the first thing you need. Try to hit my homepage and tell me if it's up. The next set of things you can monitor are metrics that can be measured from your systems and applications. System metrics are things like CPU or memory. These are time series numerical data stored in Graft, where you can look at them and answer the question of, is this service, host, or process functioning normally? You can make your applications emit custom metrics, which can be a lot more diagnostic. Looking at system or platform metrics and trying to guess what's really going wrong inside an application is a hassle. A few examples include emitting how long a certain function call is taking, or the number of logins in the last hour, or error event counts. Let's talk about performance metrics. Tied through all the previous types of metrics are hints about your performance. However, I want to call out real user monitoring and application performance monitoring, which give a much more accurate look at performance. Application Performance Monitoring, or APM, is an instrumentation framework that reports performance at the code level. It can tell you how long every function took to run, how long every API call took, and how long every database query took. Real User Monitoring, also called RUM, usually uses front-end instrumentation, for example, a JavaScript page tag to capture activity and performance as observed by the users of a system. It's able to tell you exactly what your customers are experiencing. You can combine these ideas to perform tracing across a complex system and observe the path of a request as it spreads across many smaller services, and how long each piece of work took. Logging is a great source of more detailed information than just, did it work? Or how long did it take? Because logs convey additional text, and because you can develop your application to write whatever logs you want, and you can tell details about what happened, when it happened, where did it happen, and what was involved. You can use logs for problem detection, troubleshooting, audit and compliance, capacity planning, security forensics, and much more. The last area is security monitoring. Security monitoring often uses existing logs and metrics, but augments them with ways to detect specific threats. This can include looking for specific indicators of compromise, like certain paths on endpoints, connections from known bad IPs, bad configurations, or suspicious or unusual behavior on your network systems. Examples include spikes in failed login activity, injection attempts on your website, or even malformed network requests. Ah, it could even be Ernest breaking into your server and making it print out the lyrics from Metallica song Blitzkrieg every time you log in. That's a true story. You'll have to ask him about it sometime. Observability is an area where there are many tools and many approaches. You'll want to analyze what kinds of monitoring helps you support your systems in production, and what helps the development team improve the applications. Because monitoring isn't just for production performance and uptime, it's also a source of valuable information to developers about how the service is really used out in production. Look for opportunities to collaborate with them, encourage them to improve custom app metrics and logging to get information that will help improve the product using real data.